# Hands-On: Monitoring and Tracing AWS Lambda Functions

Let's see how **monitoring and tracing** work for a Lambda function in action.

---

## Step 1: Explore CloudWatch Metrics

Open the **Lambda-S3** function and navigate to the **Monitor** tab.

**Metrics Overview:**
- **Invocations**: Number of times the function was triggered.
- **Duration**: How long each execution lasted.
- **Error Counts**: Number of failed invocations.
- **Success Rates**: Percentage of successful executions.
- **Throttles**: Occurs if the function exceeds concurrency limits.
- **Async Delivery Failures**: Failures when processing asynchronous events.
- **Iterator Age**: Relevant for stream-based event sources (Kinesis, DynamoDB Streams).
- **Concurrent Executions**: How many instances of the function run simultaneously.

> **Tip:**  
> In production, tracking these graphs over time is critical for understanding the health and performance of your Lambda functions.

---

## Step 2: Review CloudWatch Logs

Each Lambda invocation automatically creates a **Log Stream** in **CloudWatch Logs**.

**What You’ll See in Log Streams:**
- **Request ID**: Unique ID for each invocation.
- **Execution Logs**: Logs generated by your Lambda code.
- **REPORT Section**:
  - Execution duration
  - Billed duration
  - Memory size allocated
  - Maximum memory used
  - Initialization duration (cold start)

> **Example:**  
> This helps analyze performance bottlenecks and optimize resource allocation.

---

## Step 3: Enable X-Ray Tracing

### How to Enable
1. Open **Configuration → Monitoring and operations tools**.
2. Click **Edit**.
3. Enable **Active Tracing** for **AWS X-Ray**.
4. Save the changes.

If necessary, the Lambda console **automatically updates the execution role** to grant permission to write to X-Ray.

**IAM Policy Added:**
- Allows **putting trace segments** and **telemetry data** into X-Ray.

---

## Step 4: Trigger Lambda and Check Traces

1. Modify the Lambda function to **return success** (instead of errors).
2. Upload a new file to the associated **S3 bucket** to trigger Lambda.
3. Wait a few minutes for the traces to be processed.

**View in X-Ray Console:**
- Open the **X-Ray Service Map**.
- You will see:
  - **Client** invoking the **Lambda function**.
  - Green traces for successful invocations.
  - Orange traces indicating errors.

> **Tip:**  
> The **Service Map** helps **visualize the flow** and **diagnose issues** across your application architecture.

---

## Key Takeaways

| **Component** | **Purpose** |
|:--------------|:------------|
| CloudWatch Metrics | Monitor Lambda performance and health |
| CloudWatch Logs | Capture detailed execution logs |
| AWS X-Ray | Visualize request flows and debug latencies |

---

## Coming Up

Next, we'll dive deeper into **advanced deployments and configuration options** for AWS Lambda!

---
